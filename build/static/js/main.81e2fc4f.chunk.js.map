{"version":3,"sources":["services/firebase.js","hooks/use-auth.js","contexts/UserContext.js","components/UI/Button.js","welcomeVideo.mp4","components/WelcomePage/WelcomePage.js","pages/Home.js","contexts/SocketContext.js","components/Media/Player/Player.js","components/Media/VideoForm/VideoForm.js","components/Media/Media.js","contexts/RoomContext.js","components/Chat/MessagesList.js","components/Chat/Chat.js","components/UI/LoadingSpinner.js","pages/Room.js","components/NewRoomForm/NewRoomForm.js","pages/NewRoom.js","components/Header/Header.js","components/Layout/Layout.js","App.js","reportWebVitals.js","index.js","components/Media/Player/Player.module.css","components/WelcomePage/WelcomePage.module.css","components/Header/Header.module.css","components/Media/VideoForm/VideoForm.module.css","components/Chat/Chat.module.css","components/UI/LoadingSpinner.module.css","components/UI/Button.module.css"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","provider","auth","GoogleAuthProvider","addScope","UserContext","createContext","UserProvider","props","useState","user","setUser","database","ref","id","set","useEffect","unsubscribe","onAuthStateChanged","signedUser","name","displayName","photo","photoURL","uid","email","signIn","signInWithPopup","then","result","currentUser","catch","err","alert","message","useAuth","Provider","value","children","Button","className","classes","WelcomePage","history","useHistory","useContext","setTimeout","push","autoPlay","loop","muted","src","video","onClick","Home","SocketContext","socket","io","SocketProvider","Player","videoRef","useRef","videoContainerRef","barRef","volRef","fillWidth","setFillWidth","volState","setVolState","current","load","source","volumeChangeHandler","volume","on","serverData","actionTime","now","Date","latency","isPlaying","play","pause","currentTime","fileName","onTimeUpdate","progress","duration","offsetWidth","type","e","barX0","getBoundingClientRect","left","barX1","clientX","relativeProgress","localData","paused","emit","style","width","onChange","step","min","max","VideoForm","inputRef","btnRef","setSource","setInterval","bgColor","Math","random","backgroundColor","length","map","el","alt","accept","required","preventDefault","file","files","onUpload","MediaContainer","styled","div","Media","videoUrl","window","URL","createObjectURL","RoomContext","RoomProvider","roomState","setRoomState","dbRef","room","state","createRoom","owner","isPrivate","toString","slice","newRoom","admins","createdAt","toUTCString","getRoom","roomId","child","get","snapshot","exists","val","console","log","error","emotes","mustacheParrot","shortcut","cartoonParrot","dealWithParrot","cookParrot","maskParrot","MessagesList","ulRef","liRef","scrollTo","scrollHeight","offsetHeight","getEmojis","str","curStr","newArr","Object","keys","forEach","includes","arr","split","i","join","messages","isOwner","fontSize","author","content","trim","React","memo","Chat","inputState","setInputState","setMessages","showEmotes","setShowEmotes","boardRef","action","onKeyPress","key","rows","placeholder","float","target","LoadingSpinner","cx","cy","r","stroke","strokeWidth","fill","strokeLinecap","strokeDasharray","MainContainer","Container","Room","params","useParams","joinedRef","Fragment","margin","NewRoomForm","nameInputRef","privateInputRef","onSubmit","checked","autoComplete","htmlFor","NewRoom","Header","normalized","normalizeName","href","Layout","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.81e2fc4f.chunk.js","sourcesContent":["// Firebase App (the core Firebase SDK) is always required and must be listed first\r\nimport firebase from 'firebase/app';\r\n// If you are using v7 or any earlier version of the JS SDK, you should import firebase using namespace import\r\n// import * as firebase from \"firebase/app\"\r\n\r\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\r\nimport 'firebase/analytics';\r\n\r\n// Add the Firebase products that you want to use\r\nimport 'firebase/auth';\r\nimport 'firebase/firebase-database';\r\n\r\n// TODO: Replace the following with your app's Firebase project configuration\r\n// For Firebase JavaScript SDK v7.20.0 and later, `measurementId` is an optional field\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID,\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n// const provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n// provider.addScope('profile');\r\n// provider.addScope('email');\r\n\r\n// const auth = firebase.auth();\r\n\r\n// export { auth };\r\n// export { app };\r\nexport default firebase;\r\n","import { useEffect, useState } from 'react';\r\nimport firebase from './../services/firebase';\r\n\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nprovider.addScope('profile');\r\nprovider.addScope('email');\r\n\r\nconst useAuth = () => {\r\n  const [user, setUser] = useState(false);\r\n\r\n  if (user) {\r\n    firebase\r\n      .database()\r\n      .ref('users/' + user.id)\r\n      .set(user);\r\n  }\r\n\r\n  const signIn = () => {\r\n    return firebase\r\n      .auth()\r\n      .signInWithPopup(provider)\r\n      .then(function (result) {\r\n        // This gives you a Google Access Token.\r\n        // var token = result.credential.accessToken;\r\n        // The signed-in user info.\r\n        // const user = result.user;\r\n        const currentUser = {\r\n          name: result.user.displayName,\r\n          photo: result.user.photoURL,\r\n          id: result.user.uid,\r\n          email: result.user.email,\r\n        };\r\n\r\n        setUser(currentUser);\r\n      })\r\n      .catch((err) => {\r\n        alert(err.message);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = firebase.auth().onAuthStateChanged((signedUser) => {\r\n      if (signedUser) {\r\n        setUser({\r\n          name: signedUser.displayName,\r\n          photo: signedUser.photoURL,\r\n          id: signedUser.uid,\r\n          email: signedUser.email,\r\n        });\r\n      } else {\r\n        setUser(false);\r\n      }\r\n    });\r\n    // Cleanup subscription on unmount\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return {\r\n    user,\r\n    signIn,\r\n  };\r\n};\r\n\r\nexport { useAuth };\r\n","import { createContext } from 'react';\r\nimport { useAuth } from './../hooks/use-auth';\r\nimport firebase from './../services/firebase';\r\n\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nprovider.addScope('profile');\r\nprovider.addScope('email');\r\n\r\nconst UserContext = createContext({});\r\nexport { UserContext };\r\n\r\nconst UserProvider = (props) => {\r\n  const auth = useAuth();\r\n\r\n  return (\r\n    <UserContext.Provider value={auth}>{props.children}</UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UserProvider;\r\n","import classes from './Button.module.css';\r\n\r\nconst Button = (props) => {\r\n  return <button className={classes['btn']}>{props.children}</button>;\r\n};\r\n\r\nexport default Button;\r\n","export default __webpack_public_path__ + \"static/media/welcomeVideo.bc2281f5.mp4\";","import { useContext, useState } from 'react';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { UserContext } from './../../contexts/UserContext';\r\n\r\nimport Button from './../UI/Button';\r\n\r\nimport classes from './WelcomePage.module.css';\r\nimport video from './../../welcomeVideo.mp4';\r\n\r\nconst WelcomePage = () => {\r\n  const history = useHistory();\r\n  const auth = useContext(UserContext);\r\n  const [user, setUser] = useState();\r\n\r\n  setTimeout(() => {\r\n    if (auth.user) {\r\n      history.push('/room/new');\r\n    }\r\n  }, 1000);\r\n\r\n  const signInHandler = () => {\r\n    setUser(auth.signIn());\r\n    if (auth.user) history.push('/room/new');\r\n  };\r\n\r\n  return (\r\n    <div className={classes['main']}>\r\n      <video autoPlay loop muted>\r\n        <source src={video} />\r\n      </video>\r\n      <div className={classes['content-container']}>\r\n        <h1>Watchparty</h1>\r\n        <p>\r\n          <span className={classes['highlight']}>Lorem ipsum</span> dolor sit\r\n          amet{' '}\r\n          <span className={classes['highlight']}>\r\n            consectetur adipisicing elit.\r\n          </span>{' '}\r\n          Ex, ad cum sapiente reiciendis voluptate.\r\n        </p>\r\n        <div className={classes['sign-in']}>\r\n          <Button className={classes['btn-home']} onClick={signInHandler}>\r\n            <i className='fab fa-google'></i>\r\n            <span>Sign In with Google</span>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WelcomePage;\r\n","import WelcomePage from './../components/WelcomePage/WelcomePage';\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div>\r\n      <WelcomePage />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import { createContext } from 'react';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst SocketContext = createContext('');\r\nexport { SocketContext };\r\n\r\nconst socket = io();\r\n\r\nconst SocketProvider = (props) => {\r\n  return (\r\n    <SocketContext.Provider value={socket}>\r\n      {props.children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport default SocketProvider;\r\n","import { useRef, useState, useEffect, useContext } from 'react';\r\n\r\nimport { SocketContext } from './../../../contexts/SocketContext';\r\n\r\nimport classes from './Player.module.css';\r\n\r\nconst Player = (props) => {\r\n  const socket = useContext(SocketContext);\r\n\r\n  const videoRef = useRef('');\r\n  const videoContainerRef = useRef('');\r\n  const barRef = useRef('');\r\n  const volRef = useRef(1);\r\n\r\n  const [fillWidth, setFillWidth] = useState();\r\n  const [volState, setVolState] = useState(1);\r\n\r\n  useEffect(() => {\r\n    videoRef.current.load();\r\n\r\n    // socket.emit('getData');\r\n  }, [props.source]);\r\n\r\n  const playHandler = () => {\r\n    if (!props.source) return;\r\n\r\n    if (videoRef.current.paused) {\r\n      videoRef.current.play();\r\n    } else videoRef.current.pause();\r\n\r\n    const localData = {\r\n      currentTime: videoRef.current.currentTime,\r\n      isPlaying: !videoRef.current.paused,\r\n    };\r\n\r\n    socket.emit('change', localData, Date.now());\r\n  };\r\n\r\n  const seekHandler = (e) => {\r\n    if (!props.source) return;\r\n\r\n    const barX0 = barRef.current.getBoundingClientRect().left;\r\n    const barX1 =\r\n      barRef.current.getBoundingClientRect().left + barRef.current.offsetWidth;\r\n\r\n    if (e.clientX > barX0 && e.clientX < barX1) {\r\n      const absProgress = e.clientX - barX0;\r\n      const relativeProgress = absProgress / barRef.current.offsetWidth;\r\n      videoRef.current.currentTime =\r\n        relativeProgress * videoRef.current.duration;\r\n\r\n      videoRef.current.play();\r\n\r\n      const localData = {\r\n        currentTime: videoRef.current.currentTime,\r\n        isPlaying: !videoRef.current.paused,\r\n      };\r\n\r\n      socket.emit('change', localData, Date.now());\r\n    }\r\n  };\r\n\r\n  const volumeChangeHandler = () => {\r\n    videoRef.current.volume = volRef.current.value;\r\n    setVolState(volRef.current.value);\r\n  };\r\n\r\n  const muteHandler = () => {\r\n    if (volRef.current.value === '0') {\r\n      volRef.current.value = 1;\r\n      setVolState(volRef.current.value);\r\n    } else {\r\n      volRef.current.value = 0;\r\n    }\r\n\r\n    volumeChangeHandler();\r\n  };\r\n\r\n  const timeUpdateHandler = () => {\r\n    if (!props.source) return;\r\n\r\n    const progress = videoRef.current.currentTime / videoRef.current.duration;\r\n    setFillWidth(progress * barRef.current.offsetWidth + 'px');\r\n  };\r\n\r\n  socket.on('change', (serverData, actionTime) => {\r\n    if (!props.source) return;\r\n\r\n    const now = Date.now();\r\n    let latency = 0;\r\n\r\n    if (serverData.isPlaying) {\r\n      videoRef.current.play();\r\n      latency = (now - actionTime) / 10 ** 3;\r\n    } else {\r\n      videoRef.current.pause();\r\n    }\r\n\r\n    videoRef.current.currentTime = serverData.currentTime + latency;\r\n  });\r\n\r\n  socket.on('uploaded', (user, fileName) => {\r\n    // video.insertAdjacentHTML(\r\n    //   'beforebegin',\r\n    //   `\r\n    //   <h4>User ${user} uploaded: ${fileName} and invites you to upload the same file.</h4>\r\n    // `\r\n    // );\r\n\r\n    if (!props.source) return;\r\n\r\n    videoRef.current.currentTime = 0;\r\n    videoRef.current.pause();\r\n  });\r\n\r\n  const fullscreenHandler = () => {\r\n    // if (!props.source) return;\r\n\r\n    // const video = videoRef.current;\r\n    // if (video.requestFullscreen) {\r\n    //   video.requestFullscreen();\r\n    // }\r\n\r\n    if (!videoContainerRef.current) return;\r\n\r\n    if (videoContainerRef.current.style.width !== '85%') {\r\n      videoContainerRef.current.style.width = 85 + '%';\r\n    } else {\r\n      videoContainerRef.current.style.width = 70 + '%';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={videoContainerRef} className={classes['player-container']}>\r\n      <video\r\n        ref={videoRef}\r\n        onTimeUpdate={timeUpdateHandler}\r\n        id='my-video'\r\n        className=''\r\n      >\r\n        <source id='source-video' src={props.source} type='video/mp4' />\r\n      </video>\r\n      <div className={classes['player-controls']}>\r\n        <div\r\n          onClick={seekHandler}\r\n          ref={barRef}\r\n          className={classes['progress-bar']}\r\n        >\r\n          <div\r\n            style={{ width: fillWidth }}\r\n            className={classes['progress-bar-fill']}\r\n          ></div>\r\n        </div>\r\n        <div className={classes['player-buttons']}>\r\n          <button onClick={playHandler} className={classes['btn-play']}>\r\n            <i\r\n              className={\r\n                videoRef.current.paused ? 'fas fa-play' : 'fas fa-pause'\r\n              }\r\n            ></i>\r\n          </button>\r\n          <div className={classes['player-controls-right']}>\r\n            <div className={classes['control-volume']}>\r\n              <span className={classes['volume-button']}>\r\n                <i\r\n                  onClick={muteHandler}\r\n                  className={\r\n                    volState !== '0'\r\n                      ? 'fas fa-volume-down'\r\n                      : 'fas fa-volume-mute'\r\n                  }\r\n                ></i>\r\n              </span>\r\n              <input\r\n                onChange={volumeChangeHandler}\r\n                type='range'\r\n                step='0.05'\r\n                min='0'\r\n                max='1'\r\n                ref={volRef}\r\n              />\r\n            </div>\r\n            <button onClick={fullscreenHandler}>\r\n              <i className='fas fa-expand'></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Player;\r\n","import { useRef, useState, useContext } from 'react';\r\nimport classes from './VideoForm.module.css';\r\nimport { SocketContext } from './../../../contexts/SocketContext';\r\nimport { UserContext } from './../../../contexts/UserContext';\r\n\r\nconst VideoForm = (props) => {\r\n  const socket = useContext(SocketContext);\r\n  const auth = useContext(UserContext);\r\n  const inputRef = useRef('');\r\n  const btnRef = useRef('');\r\n  const [source, setSource] = useState([]);\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    const file = inputRef.current.files[0];\r\n\r\n    if (!file) return;\r\n\r\n    props.onUpload(file);\r\n\r\n    socket.emit('uploaded', auth.user, file.name);\r\n\r\n    setSource([...source, { user: auth.user, fileName: file.name }]);\r\n    // video.insertAdjacentHTML(\r\n    //   'beforebegin',\r\n    //   `\r\n    //   <h4>You uploaded: ${inputVideo.files[0].name}</h4>\r\n    // `\r\n    // );\r\n\r\n    // video.load();\r\n  };\r\n\r\n  socket.on('uploaded', (user, fileName) => {\r\n    setSource([...source, { user, fileName }]);\r\n  });\r\n\r\n  setInterval(() => {\r\n    const bgColor = `rgb(${Math.random() * 256},${Math.random() * 256},${\r\n      Math.random() * 256\r\n    })`;\r\n    if (!btnRef.current) return;\r\n\r\n    btnRef.current.style.backgroundColor = bgColor;\r\n  }, 1000);\r\n\r\n  return (\r\n    <div>\r\n      {source.length >= 1 && (\r\n        <div className={classes['info-container']}>\r\n          {source.map((el) => {\r\n            return (\r\n              <div key={Math.random()}>\r\n                <img src={el.user.photo} alt='avatar' />\r\n                <h2>\r\n                  {el.user.name} uploaded {el.fileName}\r\n                </h2>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n      <form className={classes['video-form']}>\r\n        <input\r\n          ref={inputRef}\r\n          className='input-video'\r\n          type='file'\r\n          accept='video/*'\r\n          required\r\n        />\r\n        <button\r\n          ref={btnRef}\r\n          onClick={submitHandler}\r\n          className='submit'\r\n          type='submit'\r\n        >\r\n          <img\r\n            src='https://media4.giphy.com/media/VJScpfdeSNwuPdCL0W/200w.gif'\r\n            alt='colored parrot'\r\n            width='20'\r\n          />\r\n          Special Button made by a Parrot\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoForm;\r\n","import { useState, useContext } from 'react';\r\n\r\nimport Player from './Player/Player';\r\nimport VideoForm from './VideoForm/VideoForm';\r\n\r\nimport styled from 'styled-components';\r\n\r\nimport { SocketContext } from './../../contexts/SocketContext';\r\n\r\nconst MediaContainer = styled.div`\r\n  background-color: #444647;\r\n  width: 100%;\r\n  overflow-y: scroll;\r\n  padding-right: 20%;\r\n  height: 100vh;\r\n`;\r\n\r\nconst Media = () => {\r\n  const socket = useContext(SocketContext);\r\n  const [source, setSource] = useState('');\r\n\r\n  const uploadHandler = (file) => {\r\n    const videoUrl = window.URL.createObjectURL(file);\r\n    setSource(videoUrl);\r\n    // socket.emit('uploaded', myId, inputVideo.files[0].name);\r\n  };\r\n\r\n  return (\r\n    <MediaContainer>\r\n      <VideoForm onUpload={uploadHandler} />\r\n      <Player source={source} />\r\n    </MediaContainer>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import { createContext, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\n\r\nimport firebase from './../services/firebase';\r\n\r\nconst RoomContext = createContext({});\r\n\r\nexport { RoomContext };\r\n\r\nconst RoomProvider = (props) => {\r\n  const history = useHistory();\r\n  const [roomState, setRoomState] = useState();\r\n  const dbRef = firebase.database().ref();\r\n\r\n  const room = {\r\n    state: roomState,\r\n    createRoom(name, owner, isPrivate) {\r\n      const id = Math.random().toString().slice(2, 10);\r\n      const newRoom = {\r\n        id,\r\n        name,\r\n        owner,\r\n        admins: [],\r\n        isPrivate,\r\n        createdAt: new Date().toUTCString(),\r\n      };\r\n      setRoomState(newRoom);\r\n\r\n      firebase\r\n        .database()\r\n        .ref('rooms/' + id)\r\n        .set(newRoom);\r\n\r\n      history.push('/room/' + id);\r\n    },\r\n    getRoom(roomId) {\r\n      dbRef\r\n        .child('rooms')\r\n        .child(roomId)\r\n        .get()\r\n        .then((snapshot) => {\r\n          if (snapshot.exists()) {\r\n            // console.log(snapshot.val());\r\n            setRoomState(snapshot.val());\r\n          } else {\r\n            console.log('No data available');\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n    },\r\n  };\r\n\r\n  return (\r\n    <RoomContext.Provider value={room}>{props.children}</RoomContext.Provider>\r\n  );\r\n};\r\n\r\nexport default RoomProvider;\r\n","import React, { useRef } from 'react';\r\n\r\nimport './MessagesList.css';\r\n\r\nimport styled from 'styled-components';\r\n\r\n// const IconContainer = styled.span`\r\n//   background-color: #6fb4d6;\r\n//   color: white;\r\n//   padding: 0px 2px;\r\n//   width: 1.4rem;\r\n//   height: 1.4rem;\r\n//   display: flex;\r\n//   justify-content: center;\r\n//   align-items: center;\r\n// `;\r\n\r\nconst emotes = {\r\n  mustacheParrot: {\r\n    shortcut: ':mustacheParrot:',\r\n    src: 'https://media4.giphy.com/media/VJScpfdeSNwuPdCL0W/200w.gif',\r\n  },\r\n  cartoonParrot: {\r\n    shortcut: ':cartoonParrot:',\r\n    src: 'https://acegif.com/wp-content/uploads/2020/b72nv6/partyparrt-21.gif',\r\n  },\r\n  dealWithParrot: {\r\n    shortcut: ':dealWithParrot:',\r\n    src: 'https://media4.giphy.com/media/XZOce3ICovscxHshz5/200w.gif',\r\n  },\r\n  cookParrot: {\r\n    shortcut: ':cookParrot:',\r\n    src: 'https://cdn2.scratch.mit.edu/get_image/user/60526075_60x60.png',\r\n  },\r\n  maskParrot: {\r\n    shortcut: ':maskParrot:',\r\n    src: 'https://i1.wp.com/emojis.slackmojis.com/emojis/images/1583350348/7963/mask-parrot.gif',\r\n  },\r\n};\r\n\r\nconst MessagesList = (props) => {\r\n  const ulRef = useRef();\r\n  const liRef = useRef();\r\n\r\n  if (ulRef.current && liRef.current) {\r\n    setTimeout(() => {\r\n      ulRef.current.scrollTo(\r\n        0,\r\n        ulRef.current.scrollHeight + liRef.current.offsetHeight\r\n      );\r\n    }, 500);\r\n  }\r\n\r\n  const getEmojis = (str) => {\r\n    let curStr = str;\r\n    let newArr = [];\r\n\r\n    Object.keys(emotes).forEach((el) => {\r\n      if (curStr.includes(emotes[el].shortcut)) {\r\n        let arr = curStr.split(emotes[el].shortcut);\r\n\r\n        for (let i = 0; i < arr.length + (arr.length - 1); i++) {\r\n          if (i % 2 === 0) {\r\n            newArr.push(arr[i]);\r\n          } else {\r\n            newArr.push(\r\n              <img style={{ width: 32 + 'px' }} src={emotes[el].src} alt='' />\r\n            );\r\n          }\r\n        }\r\n\r\n        curStr = newArr.join('');\r\n      }\r\n    });\r\n\r\n    if (newArr.length === 0) {\r\n      return str;\r\n    } else {\r\n      console.log(1);\r\n      return newArr;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={ulRef} id='messages'>\r\n      {props.messages.map((message) => {\r\n        return (\r\n          <div key={Math.random()} className='message-container' ref={liRef}>\r\n            <p>\r\n              {message.isOwner && (\r\n                <span className='icon-container'>\r\n                  <i\r\n                    style={{ fontSize: 16 + 'px' }}\r\n                    className='fas fa-chess-king'\r\n                  ></i>\r\n                </span>\r\n              )}\r\n              <b> {message.author}</b>\r\n              {getEmojis(message.content.trim())}\r\n            </p>\r\n            {/* <p>{message.content}</p> */}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(MessagesList);\r\n","import classes from './Chat.module.css';\r\nimport { useRef, useState, useContext } from 'react';\r\n\r\nimport { SocketContext } from './../../contexts/SocketContext';\r\nimport { UserContext } from './../../contexts/UserContext';\r\nimport { RoomContext } from './../../contexts/RoomContext';\r\n\r\nimport Button from '../UI/Button';\r\n\r\nimport MessagesList from './MessagesList';\r\n\r\nconst Chat = () => {\r\n  const [inputState, setInputState] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [showEmotes, setShowEmotes] = useState(false);\r\n\r\n  const inputRef = useRef('');\r\n  const boardRef = useRef('');\r\n\r\n  const socket = useContext(SocketContext);\r\n  const auth = useContext(UserContext);\r\n  const room = useContext(RoomContext);\r\n\r\n  socket.on('message', (content) => {\r\n    setMessages([...messages, content]);\r\n  });\r\n\r\n  socket.on('joined', (name) => {\r\n    setMessages([...messages, { author: name, content: 'joined.' }]);\r\n  });\r\n\r\n  socket.on('left', (name) => {\r\n    setMessages([...messages, { author: name, content: 'left.' }]);\r\n  });\r\n\r\n  const sendHandler = (e) => {\r\n    if (e.key !== 'Enter') return;\r\n\r\n    if (inputState.length < 1) return;\r\n\r\n    setMessages([\r\n      ...messages,\r\n      {\r\n        isOwner: auth.user.id === room.state.owner,\r\n        author: auth.user.name,\r\n        content: inputState,\r\n      },\r\n    ]);\r\n    socket.emit('message', {\r\n      isOwner: auth.user.id === room.state.owner,\r\n      author: auth.user.name,\r\n      content: inputState,\r\n    });\r\n\r\n    inputRef.current.value = '';\r\n  };\r\n\r\n  const typeHandler = () => {\r\n    setInputState(inputRef.current.value);\r\n  };\r\n\r\n  const openEmotesHandler = (e) => {\r\n    e.preventDefault();\r\n    setShowEmotes(!showEmotes);\r\n  };\r\n\r\n  // const getRef = (ulRef, liRef) => {\r\n  //   ulRef.current.scrollTo(\r\n  //     0,\r\n  //     ulRef.current.scrollHeight + liRef.current.offsetHeight\r\n  //   );\r\n  // };\r\n\r\n  const selectEmoteHandler = (e) => {\r\n    [...boardRef.current.children].forEach((el) => {\r\n      if (el.alt === e.target.alt) {\r\n        inputRef.current.value += ':' + el.alt + ':';\r\n        setInputState(inputState + ':' + el.alt + ':');\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={classes['chat-container']}>\r\n      <MessagesList messages={messages} />\r\n      <form id='form' action=''>\r\n        {/* <input\r\n          onChange={typeHandler}\r\n          value={inputState}\r\n          ref={inputRef}\r\n          id='input'\r\n          type='text'\r\n          autoComplete='off'\r\n        /> */}\r\n        <textarea\r\n          onChange={typeHandler}\r\n          onKeyPress={sendHandler}\r\n          ref={inputRef}\r\n          rows='3'\r\n          placeholder='Send your message.'\r\n        ></textarea>\r\n        {/* <button onClick={sendHandler} type='submit'>\r\n          Send\r\n        </button> */}\r\n        <button onClick={openEmotesHandler} style={{ float: 'right' }}>\r\n          <i className='far fa-smile'></i>\r\n        </button>\r\n        {showEmotes && (\r\n          <div\r\n            ref={boardRef}\r\n            onClick={selectEmoteHandler}\r\n            className={classes['emote-board']}\r\n          >\r\n            <img\r\n              src='https://media4.giphy.com/media/VJScpfdeSNwuPdCL0W/200w.gif'\r\n              alt='mustacheParrot'\r\n            />\r\n\r\n            <img\r\n              src='https://acegif.com/wp-content/uploads/2020/b72nv6/partyparrt-21.gif'\r\n              alt='cartoonParrot'\r\n            />\r\n\r\n            <img\r\n              src='https://media4.giphy.com/media/XZOce3ICovscxHshz5/200w.gif'\r\n              alt='dealWithParrot'\r\n            />\r\n\r\n            <img\r\n              src='https://cdn2.scratch.mit.edu/get_image/user/60526075_60x60.png'\r\n              alt='cookParrot'\r\n            />\r\n            <img\r\n              src='https://i1.wp.com/emojis.slackmojis.com/emojis/images/1583350348/7963/mask-parrot.gif'\r\n              alt='maskParrot'\r\n            />\r\n          </div>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import classes from './LoadingSpinner.module.css';\r\n\r\nconst LoadingSpinner = () => {\r\n  return (\r\n    <svg className={classes['spinner-svg']}>\r\n      <circle\r\n        className={classes['spinner']}\r\n        cx='5rem'\r\n        cy='5rem'\r\n        r='4rem'\r\n        stroke='rgba(1,1,1,0.75)'\r\n        strokeWidth='10'\r\n        fill='rgba(1,1,1,0)'\r\n        strokeLinecap='round'\r\n        strokeDasharray='16rem'\r\n      ></circle>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;\r\n","import React, {\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useState,\r\n  useRef,\r\n} from 'react';\r\n\r\nimport Media from './../components/Media/Media';\r\nimport Chat from './../components/Chat/Chat';\r\nimport LoadingSpinner from './../components/UI/LoadingSpinner';\r\nimport SignInBox from './../components/SignInBox/SignInBox';\r\nimport Button from './../components/UI/Button';\r\n\r\nimport styled from 'styled-components';\r\nimport firebase from './../services/firebase';\r\n\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { UserContext } from '../contexts/UserContext';\r\nimport { RoomContext } from '../contexts/RoomContext';\r\nimport { SocketContext } from '../contexts/SocketContext';\r\n\r\nconst MainContainer = styled.div`\r\n  background-color: grey;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding-top: 5rem;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  padding: 5rem;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  background: rgb(0, 33, 36);\r\n  background: radial-gradient(\r\n    circle,\r\n    rgba(0, 33, 36, 1) 0%,\r\n    rgba(163, 163, 163, 1) 0%,\r\n    rgb(80, 80, 80) 100%\r\n  );\r\n`;\r\n\r\nconst Room = () => {\r\n  const history = useHistory();\r\n  const socket = useContext(SocketContext);\r\n  const auth = useContext(UserContext);\r\n  const room = useContext(RoomContext);\r\n  const params = useParams();\r\n  const joinedRef = useRef(false);\r\n  const [user, setUser] = useState(false);\r\n\r\n  const { roomId } = params;\r\n\r\n  // setTimeout(() => {\r\n  //   if (auth.user) {\r\n  //     history.push('/room/new');\r\n  //   }\r\n  // }, 1000);\r\n\r\n  const signInHandler = () => {\r\n    console.log(1);\r\n    setUser(auth.signIn());\r\n    console.log(1);\r\n  };\r\n\r\n  if (!room.state) {\r\n    room.getRoom(roomId);\r\n  } else if (!joinedRef.current) {\r\n    socket.emit('join', roomId, auth.user.name);\r\n    joinedRef.current = true;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!room.state ? (\r\n        <Container>\r\n          <LoadingSpinner />\r\n        </Container>\r\n      ) : (\r\n        <React.Fragment>\r\n          {room ? (\r\n            <React.Fragment>\r\n              {!user && !auth.user && (\r\n                <Container>\r\n                  <h1 style={{ margin: 3 + 'rem' }}>\r\n                    You have to sign in in order to have access.\r\n                  </h1>\r\n                  <div onClick={signInHandler}>\r\n                    <Button>\r\n                      <i className='fab fa-google'></i>\r\n                      <span>Sign In with Google</span>\r\n                    </Button>\r\n                  </div>\r\n                </Container>\r\n              )}\r\n              {auth.user && (\r\n                <MainContainer>\r\n                  <Media />\r\n                  <Chat />\r\n                </MainContainer>\r\n              )}\r\n            </React.Fragment>\r\n          ) : (\r\n            <Container>\r\n              <h1 style={{ fontSize: 42 + 'px' }}>Room Not Found</h1>\r\n            </Container>\r\n          )}\r\n        </React.Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import { useContext, useRef } from 'react';\r\nimport { useHistory } from 'react-router';\r\n\r\nimport './NewRoomForm.css';\r\n\r\nimport Button from './../UI/Button';\r\n\r\nimport { UserContext } from './../../contexts/UserContext';\r\nimport { RoomContext } from './../../contexts/RoomContext';\r\n\r\nconst NewRoomForm = () => {\r\n  const history = useHistory();\r\n  const auth = useContext(UserContext);\r\n  const room = useContext(RoomContext);\r\n  const nameInputRef = useRef();\r\n  const privateInputRef = useRef();\r\n\r\n  if (!auth.user) history.push('/');\r\n\r\n  const createRoomHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    room.createRoom(\r\n      nameInputRef.current.value,\r\n      auth.user.id,\r\n      privateInputRef.current.checked\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className='new-room-container'>\r\n      <div className='new-room-form-container'>\r\n        <h1>New Room</h1>\r\n        <form onSubmit={createRoomHandler}>\r\n          <div className='name-control'>\r\n            <input\r\n              required\r\n              ref={nameInputRef}\r\n              placeholder='Name'\r\n              id='name'\r\n              type='text'\r\n              autoComplete='off'\r\n            />\r\n          </div>\r\n          <div className='check-control'>\r\n            <input ref={privateInputRef} id='check' type='checkbox' />\r\n            <label htmlFor='check'>Private</label>\r\n          </div>\r\n          <Button type='submit'>Create New Room</Button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewRoomForm;\r\n","import NewRoomForm from './../components/NewRoomForm/NewRoomForm';\r\n\r\nconst NewRoom = () => {\r\n  return <NewRoomForm />;\r\n};\r\n\r\nexport default NewRoom;\r\n","import classes from './Header.module.css';\r\nimport { useContext } from 'react';\r\n\r\nimport { UserContext } from '../../contexts/UserContext';\r\nimport { RoomContext } from '../../contexts/RoomContext';\r\n\r\nconst Header = () => {\r\n  const room = useContext(RoomContext);\r\n  const auth = useContext(UserContext);\r\n\r\n  const getInvitationHandler = () => {\r\n    console.log(1);\r\n  };\r\n\r\n  const normalizeName = (name) => {\r\n    if (name.length > 20) {\r\n      let normalized = '';\r\n\r\n      for (const i of name) {\r\n        if (i === ' ') {\r\n          return normalized;\r\n        }\r\n\r\n        normalized += i;\r\n      }\r\n\r\n      return name.slice(0, 19) + '...';\r\n    } else {\r\n      return name;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className={classes['main-header']}>\r\n      <h1>WatchParty</h1>\r\n      {auth.user && (\r\n        <div className={classes['user-greeting']}>\r\n          <h3>Welcome, {normalizeName(auth.user.name)}</h3>\r\n        </div>\r\n      )}\r\n      <nav>\r\n        <ul>\r\n          <li>\r\n            <a href='/'>Home</a>\r\n          </li>\r\n          {room.state && (\r\n            <li className={classes['invite']} onClick={getInvitationHandler}>\r\n              <i className='fas fa-link'></i>\r\n              <p>Get Link</p>\r\n            </li>\r\n          )}\r\n        </ul>\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import Header from '../Header/Header';\r\n\r\nconst Layout = (props) => {\r\n  return (\r\n    <div>\r\n      <Header />\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","import './App.css';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nimport Home from './pages/Home';\r\nimport Room from './pages/Room';\r\nimport NewRoom from './pages/NewRoom';\r\n\r\nimport Layout from './components/Layout/Layout';\r\n\r\nfunction App() {\r\n  return (\r\n    <Layout>\r\n      <Switch>\r\n        <Route path='/' exact>\r\n          <Home />\r\n        </Route>\r\n        <Route path='/room/new' exact>\r\n          <NewRoom />\r\n        </Route>\r\n        <Route path='/room/:roomId' exact>\r\n          <Room />\r\n        </Route>\r\n      </Switch>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport SocketProvider from './contexts/SocketContext';\r\nimport UserProvider from './contexts/UserContext';\r\nimport RoomProvider from './contexts/RoomContext';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <RoomProvider>\r\n        <UserProvider>\r\n          <SocketProvider>\r\n            <App />\r\n          </SocketProvider>\r\n        </UserProvider>\r\n      </RoomProvider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"player-container\":\"Player_player-container__2Sobe\",\"player-controls\":\"Player_player-controls__aAcpm\",\"player-controls-right\":\"Player_player-controls-right__3aSI0\",\"player-buttons\":\"Player_player-buttons__1X5Nn\",\"control-volume\":\"Player_control-volume__1Krx8\",\"progress-bar\":\"Player_progress-bar__3Ia-m\",\"progress-bar-fill\":\"Player_progress-bar-fill__1qCUq\",\"btn-play\":\"Player_btn-play__1pyf1\",\"volume-button\":\"Player_volume-button__1ouUy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"WelcomePage_main__23DkG\",\"highlight\":\"WelcomePage_highlight__2uP9-\",\"content-container\":\"WelcomePage_content-container__3D0t7\",\"appear\":\"WelcomePage_appear__2NgdU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-header\":\"Header_main-header__uxmvG\",\"invite\":\"Header_invite__B8Id2\",\"user-greeting\":\"Header_user-greeting__3TRYE\",\"appear\":\"Header_appear__YwtNC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info-container\":\"VideoForm_info-container__1v7h9\",\"video-form\":\"VideoForm_video-form__2W8H6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-container\":\"Chat_chat-container__ALfRp\",\"emote-board\":\"Chat_emote-board__1kGmq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner-svg\":\"LoadingSpinner_spinner-svg__bIIGb\",\"spin\":\"LoadingSpinner_spin__347Ra\",\"spinner\":\"LoadingSpinner_spinner__1rJY2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Button_btn__32gbx\",\"primary\":\"Button_primary__dhJsS\"};"],"sourceRoot":""}